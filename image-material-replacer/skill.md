---
name: image-material-replacer
description: 基于示例图片分析提示词，用户修改文案后替换新素材，生成16:9新图片。适用于电商产品图、社交媒体配图、广告创意等场景。
---

# 图片素材替换生成器

智能图片生成技能，能够分析示例图片的视觉风格，结合用户自定义文案和新素材，快速生成风格统一的 16:9 高质量图片。

## 触发条件

- 用户说 "使用图片素材替换"、"图片素材替换"
- 用户说 "生成产品图"、"替换素材生成图片"
- 用户说 "保持风格生成新图"

## 前置依赖

**必需**：
- 图像生成 API：`https://llm.tokencloud.ai/v1/images/generations`
- API Key：`sk-RPo8Q8Lf9_SKoNMSjo5DNA`
- 模型：`openai/z-images`

**可选**：
- "图片提示词反向分析器" skill（用于自动分析）

## 工作流程

### 完整 4 步流程

```
步骤1：上传并分析示例图片
    ↓
步骤2：修改标题和描述文案
    ↓
步骤3：上传新素材图片
    ↓
步骤4：生成新图片（16:9, 4K）
```

---

## 详细执行步骤

### 步骤 1：上传并分析示例图片

**用户操作**：
- 上传一张参考图片（示例图片）

**系统操作**：
1. 接收图片
2. 分析视觉元素：
   - 整体风格（简约/复杂/艺术/商业）
   - 色彩方案（冷色调/暖色调/配色组合）
   - 光线效果（自然光/人造光/方向/强度）
   - 构图方式（三分法/中心构图/对角线等）
   - 背景处理（纯色/渐变/场景/纹理）
   - 材质表现（细节/质感/光影）
3. 提取关键提示词
4. 展示分析结果

**输出示例**：
```
✅ 示例图片分析完成！

📋 提取的提示词信息：
- 整体风格：极简主义，现代商业风格
- 色彩方案：冷色调为主，高对比度
- 光线：柔和顶光，突出产品质感
- 构图：三分法则，产品位于画面中心
- 背景：纯色或渐变，无干扰元素
- 材质表现：细腻的布料质感，光影过渡自然

接下来请提供新的标题和描述文案。
```

---

### 步骤 2：修改标题和描述文案

**用户操作**：
- 输入新标题（如："春季新品发布"）
- 输入描述文案（详细描述想要的画面内容）

**文案撰写建议**：

| 要素 | 说明 | 示例 |
|------|------|------|
| **标题** | 简洁明确（5-15字） | "Multi-Agent Cluster" |
| **描述** | 详细描绘画面内容 | 包含场景、氛围、光线等细节 |
| **关键元素** | 必须包含的视觉元素 | UI界面、产品、背景等 |
| **氛围感** | 使用形容词增强视觉感 | 温暖、清新、专业、科技感 |

**输出示例**：
```
✅ 文案已记录：
- 标题: Multi-Agent Cluster
- 描述: Professional tech product showcase, sunset background,
        dark UI overlays, green branding...

接下来请上传新的素材图片。
```

---

### 步骤 3：上传新素材图片

**用户操作**：
- 上传要融入的素材图片（产品照片/UI截图等）

**素材准备建议**：
- ✅ 高质量原图（建议 > 1MB）
- ✅ 主体清晰、背景干净
- ✅ 与目标场景相关
- ✅ 最好已抠图（透明背景）

**系统操作**：
1. 接收素材图片
2. 分析主要元素：
   - 主要对象（产品/人物/界面）
   - 主色调
   - 风格特征
   - 设计细节
3. 提取关键特征

**输出示例**：
```
✅ 素材图片已上传！

📸 素材特征：
- 主要元素：AI Personal Assistant界面，7个会话
- 主色调：深色系，绿色点缀
- 风格特征：玻璃拟态，现代UI设计
- 设计细节：圆形头像，绿色状态徽章，圆角卡片

准备生成新图片...
```

---

### 步骤 4：生成新图片

**系统操作**：

1. **组合最终提示词**

```
标题: {新标题}

描述: {新描述文案}

风格参考: {示例图片分析结果}

素材元素: {素材图片特征}

要求:
- 保持原图的整体风格和氛围
- 融合新素材图片中的关键元素
- 画面构图合理，16:9横向布局
- 高质量、细节丰富
```

2. **调用图像生成 API**

```json
{
  "model": "openai/z-images",
  "prompt": "{最终提示词}",
  "n": 1,
  "size": "1792x1024",
  "response_format": "b64_json"
}
```

3. **解码并保存图像**

```python
# API 返回 Base64 编码的 JSON
# 解码为 PNG 图片
# 保存到临时目录或用户指定路径
```

**输出示例**：
```
🎨 新图片生成成功！

📐 尺寸: 1792×1024 (16:9)
📝 使用的提示词:
{完整提示词}

💾 保存路径: C:\Users\Jizhen\AppData\Local\Temp\output.png

---
生成的图片:
[显示图片]

如需重新生成或调整，请告诉我！
```

---

## 应用场景

### 1. 电商产品图批量生成
**场景**：保持品牌视觉风格，快速生成不同产品的营销图

示例图：品牌A的产品展示图（风格：简约现代）
新素材：品牌A的新款产品照片
结果：风格统一的新产品营销图

### 2. 社交媒体配图
**场景**：为不同内容生成统一风格的配图

示例图：之前表现好的社媒配图
新文案：新的活动主题和文案
结果：风格一致的系列配图

### 3. 广告创意迭代
**场景**：基于优质广告创意，快速生成变体

示例图：高转化的广告素材
新素材：不同的产品或场景
结果：相似风格的多版本广告图

### 4. 品牌视觉统一化
**场景**：将旧素材升级为统一的新品牌风格

示例图：新品牌视觉规范示例
旧素材：历史产品照片
结果：符合新品牌风格的更新图片

---

## 技术配置

### API 配置

| 配置项 | 值 |
|--------|-----|
| API Base | `https://llm.tokencloud.ai` |
| API Key | `sk-RPo8Q8Lf9_SKoNMSjo5DNA` |
| 端点 | `/v1/images/generations` |
| 模型 | `openai/z-images` |
| 响应格式 | `b64_json` |
| 图片尺寸 | `1792x1024` (16:9) |

### 输出参数

| 参数 | 默认值 | 可选值 |
|------|--------|--------|
| 生成比例 | 16:9 | 1:1, 9:16, 4:3 |
| 图片尺寸 | 1792×1024 | 1024×1024, 1024×1792 |
| 数量 | 1 | 1-4 |
| 响应格式 | b64_json | b64_json |

---

## 最佳实践

### 示例图片选择

✅ **推荐**：
- 构图清晰、主体突出
- 风格明确、易于识别
- 高分辨率图片（> 1MB）

❌ **不推荐**：
- 模糊、低分辨率
- 风格混杂、元素过多
- 版权受限的图片

### 文案撰写技巧

**标题**：
- ✅ 简洁明确（5-15字）
- ✅ 直接表达主题
- ❌ 避免过长或模糊

**描述**：
- ✅ 详细描绘画面内容
- ✅ 包含关键元素、氛围、光线等细节
- ✅ 使用形容词增强视觉感
- ✅ 具体：如 "柔和的清晨阳光，45度角侧光"
- ❌ 模糊：如 "好看的光线"

### 素材图片准备

- 高质量原图（建议 > 1MB）
- 主体清晰、背景干净
- 与目标场景相关
- 建议去除背景（使用抠图工具）
- 调整素材图片的大小和比例

---

## 高级技巧

### 技巧 1：多次生成优选

如果第一次生成不满意：
1. 保持步骤 1-3 不变
2. 优化描述文案（添加更多细节）
3. 重新执行步骤 4

### 技巧 2：风格混搭

可以在描述中混合多种风格：
```
基础风格：简约现代（来自示例图）
叠加风格：赛博朋克氛围 + 日系配色
```

### 技巧 3：批量生成

保持示例图不变，只修改文案和素材，可快速生成系列图片：
```
示例图：品牌规范图
文案 1 + 素材 1 → 产品 A 营销图
文案 2 + 素材 2 → 产品 B 营销图
文案 3 + 素材 3 → 产品 C 营销图
```

### 技巧 4：精确控制元素位置

在描述中使用明确的位置描述：
```
- "标题位于画面左上角"
- "产品居中摆放"
- "Logo 位于右上角"
- "背景采用三分法布局"
```

---

## 故障排除

### Q: 生成的图片风格差异很大？

**A**:
- 检查示例图片是否风格明确
- 优化描述文案，增加更多细节
- 尝试多次生成选择最佳结果

### Q: 素材元素没有融入？

**A**:
- 确保素材图片主体清晰
- 在描述文案中明确提到素材元素
- 提高素材图片的分辨率

### Q: 生成失败或超时？

**A**:
- 检查网络连接
- 检查 API Key 是否有效
- 简化描述文案
- 稍后重试

### Q: 图片质量不够高？

**A**:
- 使用更高分辨率的示例图和素材图
- 在描述中添加 "4K"、"high detail"、"professional quality" 等关键词

---

## 注意事项

1. **响应格式**：必须使用 `response_format: b64_json`
2. **生成时间**：约 10-30 秒，请耐心等待
3. **API 限制**：注意 API 调用频率限制
4. **内容安全**：API 有内容过滤，避免生成敏感内容
5. **版权问题**：确保示例图和素材图有使用权限

---

## 性能指标

| 指标 | 数值 |
|------|------|
| 平均生成时间 | 10-30秒 |
| 支持图片格式 | JPG, PNG, WEBP |
| 最大输入图片 | 10MB |
| 输出分辨率 | 1792×1024 (16:9) |
| 输出格式 | PNG |

---

## 完整示例

### 示例：生成春季产品图

**步骤 1：上传示例**
```
示例图：冬季产品展示图
分析结果：
- 风格：简约现代
- 色调：冷色调，深蓝+白色
- 构图：中心产品+极简背景
- 光线：柔和顶光
```

**步骤 2：输入文案**
```
标题：春季新品上市

描述：温暖明亮的春季产品展示，采用简约现代的风格，
      柔和的自然光，浅粉色和淡绿色的春季色调，
      产品居中摆放，清新的植物元素点缀背景
```

**步骤 3：上传素材**
```
素材：春季新款产品照片（白底）
分析：简洁造型，轻盈质感，适合春季主题
```

**步骤 4：生成结果**
```
输出：保持简约现代风格，融入春季色彩和植物元素，
      产品清晰展示，16:9横向构图，适合电商Banner使用
```

---

## 相关文档

- 完整配置：`skill-config.xml`
- API 文档：`docs/API.md`
- 使用示例：`examples/example-usage.md`
- 项目结构：`STRUCTURE.md`

---

## 版本信息

- **版本**: v1.0.0
- **创建**: 2026-01-29
- **作者**: Karma AI
- **许可**: MIT

---

## 关键词

图像生成, 素材替换, 提示词分析, 图生图, 产品图, 社交媒体配图, 广告创意, 品牌视觉, z-images
